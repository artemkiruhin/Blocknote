@page "/create"
@using System.ComponentModel.DataAnnotations

<div>
    <button class="add-note-btn" @onclick="OpenModal">
        <span class="icon">+</span> Add Note
    </button>

    @if (isModalOpen)
    {
        <div class="modal">
            <div class="modal-content">
                <h2>Create New Note</h2>
                <EditForm Model="@newNote" OnValidSubmit="SaveNote">
                    <DataAnnotationsValidator />
                    <div>
                        <input type="text"
                               class="modal-input"
                               placeholder="Note Title"
                               @bind-value="newNote.Title"
                               @bind-value:event="oninput" />
                        <ValidationMessage For="@(() => newNote.Title)" />
                    </div>

                    <div>
                        <input type="text"
                               class="modal-input"
                               placeholder="Subtitle (Optional)"
                               @bind-value="newNote.Subtitle"
                               @bind-value:event="oninput" />
                    </div>

                    <div>
                        <textarea class="modal-textarea"
                                  placeholder="Note Content (Optional)"
                                  @bind-value="newNote.Content"
                                  @bind-value:event="oninput"></textarea>
                    </div>

                    <div class="modal-buttons">
                        <button type="button" class="modal-cancel" @onclick="CloseModal">Cancel</button>
                        <button type="submit" class="modal-save">Save</button>
                    </div>
                </EditForm>
            </div>
        </div>
    }
</div>

@code {
    private bool isModalOpen = false;
    private NoteModel newNote = new NoteModel();

    private void OpenModal()
    {
        isModalOpen = true;
    }

    private void CloseModal()
    {
        isModalOpen = false;
        newNote = new NoteModel();
    }

    private void SaveNote()
    {
        // Here you would typically add logic to save the note
        Console.WriteLine($"Saving note: {newNote.Title}");
        CloseModal();
    }

    public class NoteModel
    {
        [Required(ErrorMessage = "Title is required")]
        [StringLength(100, ErrorMessage = "Title must be less than 100 characters")]
        public string Title { get; set; } = string.Empty;

        public string? Subtitle { get; set; }

        public string? Content { get; set; }
    }
}